---
draft: false
title: "Kotlin Swift - Jetpack Compose iOS"
snippet: "Jetpack Compose iOS, interoperability, ComposeUIViewController, UIViewControllerRepresentable, UIKitView..."
image: {
    src: "/images/blog/first-composable-ios.png",
    alt: "Jetpack Compose on iOS interoperability, ComposeUIViewController, UIViewControllerRepresentable"
}
publishDate: "2023-03-07"
category: "Tutorials"
author: "Louis Duboscq"
tags: [kmm, compose-multiplatform, ios]
--- 

In this post, you'll learn how to **render compose multiplatform composables into SwiftUI for iOS**. 

You'll also learn how to **create an iOS UIKit component into Jetpack Compose** (Compose multiplatform).

Thanks to this guide you'll master the **interoperability in Compose multiplatform** and the keywords : **UIKitView, ComposeUIViewController and UIViewControllerRepresentable** will ne longer have secrets for you.

## How the guide is organized 

- Build the shared ui component
- Write specific code in androidMain and iOSMain packages for both platforms
- Write the client code (Kotlin MainActivity and SwiftUI) and call our shared UI
- Learn UIKitView to write iOS UIKit component into Compose

## iOS developers

If you are an iOS developer, you'll learn Kotlin/Swift interoperability and KMM/Compose multiplatform are not another black box tech to use instead of your favorites tools (XCode, Swift, SwiftUI, etc). 
We know that because of Xamarin, React Native, and flutter, among others, you're skeptical.
But KMM/Compose multiplatform is the tool to add to your toolbox rather than a replacement for it.

## Android developers

If you are an Android developer, you'll see it's just a matter of putting the composables in the right place and removing the Android dependencies (Context, permissions, navigation, ...).

## Before all - Setup 

Before all, create a kotlin multiplatform module and add the compose multiplatform plugin (org.jetbrains.compose) and dependencies :

```kotlin
implementation(compose.runtime)
implementation(compose.foundation) 
implementation(compose.material3)
```

## 1. Build UI on shared module

Define your screen in the shared module as you would build it in a simple Android Compose application.

```kotlin
@Composable
fun MyScreen() {
    Column {
        Text("Hello from compose")
        Button(onClick= {}) { Text("Click me")}
    }
}
```

Here our screen MyScreen is built and normally can be used in an application. 
But for iOS, the composable functions can not be called directly, they must be wrapped into an UIViewController.
That's why we use the androidMain and iOSMain packages.

## 2. Use androidMain and iOSMain packages


On the androidMain module we call the MyScreen composable and before we setup the decor (bottom and status bar to have a beautiful screen) thanks to the accompanist library : systemuicontroller.

```kotlin
@Composable
fun MyScreenAndroid() {
    setupDecor()
    MyScreen()
}
```

On the iosMain module we wrap our MyScreen composable into a ComposeUIViewController : 

```kotlin
fun MyScreenIos(): UIViewController = ComposeUIViewController {
    MyScreen()
}
```

That way it's possible to call it inside the iOS app. The decoration (safe area) will be managed in the iOS code. 

## 3 Client apps

### Android

On Android it's simple. Just call in the android app the exposed screen built in kotlin multiplatform module.

```kotlin
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MyScreenAndroid()
        }
    }
}
```

### iOS

Doing this, you made a Viewcontroller and you have to use UIViewControllerRepresentable to expose it as a standard SwiftUI component.

```swift
struct MyScreenToSwiftUI: UIViewControllerRepresentable {
    func makeUIViewController(context: Context) -> UIViewController {
        return MyScreenIos()
    }
    
    func updateUIViewController(_ uiViewController: UIViewController, context: Context) {
    }
}
````

Then you simply can call it in your Swift UI component :

````swift
@main
struct iOSApp: App { 
    var body: some Scene {
        WindowGroup {
            MyScreenToSwiftUI()
        }
    }
}
````

![alt](/images/basic-compose-mpp-both.png)

That's all! You learned to render your first Compose multiplatform component in SwiftUI.